<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Compiler</title>
    <style>
      #code {
        width: 600px;
        height: 300px;
      }
    </style>
  </head>
  <body>
    <div><select id="select"></select></div>
    <div>
      <textarea id="code">
var a = 1;
var b = 2;
print a + b;
      </textarea>
    </div>
    <div>
      <button id="run">run</button>
    </div>
    <div>
      <span id="result"></span>
    </div>
    <script src="./lox.umd.js"></script>
    <script>
      function runText(text) {
        const Lox = window.lox.Lox;
        const Environment = window.lox.Environment;
        new Lox().run(text, new Environment(null));
      }
      window.onload = function () {
        const textarea = document.querySelector('#code');
        const button = document.querySelector('#run');
        const result = document.querySelector('#result');
        window.localStorage.setItem('debug', '*');

        button.addEventListener('click', function () {
          const text = (textarea && textarea.value) || '';
          runText(text);
        });
      };
    </script>
  </body>
</html>
